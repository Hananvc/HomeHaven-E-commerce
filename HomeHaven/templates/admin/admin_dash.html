{% load static %}
<html lang="en">
<head>
    <title>The HomeHaven</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="{% static 'img/favicon.png' %}">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
          integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'css/admin/sidebar.css' %}">
    <script src="{% static 'js/admin/myjs.js' %}"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.3.6/css/buttons.dataTables.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
    <!-- Default theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"/>
    <!--Chartjs CDN-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

    <style>

        body{
            background-image : linear-gradient(16deg, #ff005a 0%, #ff5d2d 64%, #ffba00 100%);
            min-height:100vh;
            }

    </style>
    <style>
        .delete-image-btn {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 24px;
            height: 24px;
            background-color: red;
            color: white;
            font-size: 14px;
            border-radius: 50%;
            text-decoration: none;
        }
    </style>

</head>
<body>
<!--vertical navbar start-->
<div class="vertical-nav bg-white" id="sidebar">
    <div class="py-4 px-3 mb-1 bg-light">
        <!--align media objects (like images or videos) together with content
        To create a flexbox container and to transform direct children into flex items, use the d-flex class
        -->
        <p class="font-weight-bold text-uppercase px-3 small dashboard-text text-center">The HomeHaven</p>
        <div class="media d-flex align-items-center">
            <img src="{% static 'img/2.jpg' %}" width="110" height="100"
                 class="mr-3 rounded-circle img-thumbnail shadow-sm">
            <div class="media-body">
                <h4 class="mb-0">Admin</h4>
                <p class="text-muted mb-0">{{request.user.first_name}}</p>
            </div>
        </div>
    </div>

 
    <!--.flex-column to display the flex items vertically (on top of each other)-->
    <ul class="nav flex-column bg-white">
        <li class="nav-item">
            <a href="{% url 'admindash' %}" class="nav-link text-dark bg-light">
                <i class="fas fa-tachometer-alt fa-fw mr-3 text-primary"></i>
                Dashboard
            </a>
        </li>
        <!--fa-fw class is used to set icons at a fixed width. This class is useful when different icon widths throw off alignment-->

 
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle text-dark bg-light" href="#" id="navbardrop" data-toggle="dropdown">
                <i class="fas fa-chart-bar mr-3 text-primary fa-fw"></i> Furniture Category
            </a>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="{% url 'addcategory' %}">Add Category</a>
                <a class="dropdown-item" href="{% url 'viewcategory' %}">View Category</a>
            </div>
        </li>

 
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle text-dark bg-light" href="#" id="navbardrop" data-toggle="dropdown">
                <i class="fas fa-chart-bar mr-3 text-primary fa-fw"></i> Manage Product
            </a>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="{% url 'addproduct' %}">Add Product</a>
                <a class="dropdown-item" href="{% url 'viewproduct' %}">View Product</a>
            </div>
        </li>
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle text-dark bg-light" href="" id="navbardrop" data-toggle="dropdown">
                <i class="fas fa-chart-bar mr-3 text-primary fa-fw"></i> Manage User
            </a>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="{% url 'manageuser' %}">View User</a>

 
            </div>
        </li>
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle text-dark bg-light" href="#" id="navbardrop" data-toggle="dropdown">
                <i class="fas fa-chart-bar mr-3 text-primary fa-fw"></i> Coupons
            </a>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="{% url 'addcoupon' %}">Add Coupon</a>
                <a class="dropdown-item" href="{% url 'viewcoupon' %}">View Coupon</a>
            </div>
        </li>
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle text-dark bg-light" href="#" id="navbardrop" data-toggle="dropdown">
                <i class="fas fa-chart-bar mr-3 text-primary fa-fw"></i> Manage Order
            </a>
            <div class="dropdown-menu">
             
                <a class="dropdown-item" href="{% url 'manageorder' %}">View Order</a>
            </div>
        </li>
        <li class="nav-item">
            <a href="{% url 'salesreport' %}" class="nav-link text-dark bg-light">
                <i class="fas fa-cog mr-3 text-primary fa-fw"></i>
                Sales Report
            </a>
        </li>
        <li class="nav-item">
            <a href=" {% url 'adminlogout' %}" class="nav-link text-dark bg-light">
                <i class="fas fa-sign-out-alt mr-3 text-primary fa-fw"></i>
                Logout
            </a>
        </li>

 
    </ul>
</div>
<!--vertical navbar end-->
<!--page content holder-->
<div class="page-content p-4 " id="content">
    
    
<div class="container d-flex justify-content-between mb-2">
    
    <!--toggle btn-->
    <button id="sidebarCollapse" type="button" class="btn btn-light bg-white rounded-pill shadow-sm px-4">
        <i class="fas fa-bars mr-2"></i>
        <small class="text-uppercase font-weight-bold">Toggle</small>
    </button>
    <h1 class="text-center mx-5">The <span style="color: #eee;" class="font-weight-bold">HomeHaven </span> Admin Panel</h1>
    <a href="{% url 'adminlogout' %}" title="logout" class="float-right text-white mt-2"><i class="fas fa-sign-out-alt fa-2x"></i></a>
    
    <!--end toggle btn-->
</div>
    

 
    {% block main %}
    <div class="row">
    <div class="col-lg-3 p-2">
        <div class="card shadow bg-dark">
            <div class="card-body">
                <h4 class="text-light">Total Users</h4>
                <h5 style="color : #F1948A">{{user}}</h5>
            </div>
            {% comment %} <div class="card-footer">
                <a href="" class="text-warning">View Details >></a>
            </div> {% endcomment %}
        </div>
    </div>
    <div class="col-lg-3 p-2">
        <div class="card shadow bg-dark">
            <div class="card-body">
                <h4 class="text-light">Total Products</h4>
                <h5 style="color : #F1948A">{{product}}</h5>
            </div>
        </div>
    </div>
    <div class="col-lg-3 p-2">
        <div class="card shadow bg-dark">
            <div class="card-body">
                <h4 class="text-light">Total Category</h4>
                <h5 style="color : #F1948A">{{category}}</h5>
            </div>
        </div>
    </div>
    <div class="col-lg-3 p-2">
        <div class="card shadow bg-dark">
            <div class="card-body">
                <h4 class="text-light">Total Order</h4>
                <h5 style="color : #F1948A"> {{order}}</h5>
            </div>
        </div>
    </div>
    <div class="col-lg-3 p-2">
        <div class="card shadow bg-dark">
            <div class="card-body">
                <h4 class="text-light">Revenue Expected</h4>
                <h5 style="color : #F1948A">{{total_income}}</h5>
            </div>
        </div>
    </div>
    <div class="col-lg-3 p-2">
        <div class="card shadow bg-dark">
            <div class="card-body">
                <h4 class="text-light">Total COD orders</h4>
                <h5 style="color : #F1948A">{{cod_sum}}</h5>
            </div>
        </div>
    </div>
    <div class="col-lg-3 p-2">
        <div class="card shadow bg-dark">
            <div class="card-body">
                <h4 class="text-light">Total Razorpay Orders</h4>
                <h5 style="color : #F1948A">{{razorpay_sum}}</h5>
            </div>
        </div>
    </div>
</div>



    <!--Graphs-->
    <div class="container">
        <div class="row my-5">
            <div class="col-md-6">
                <div class="bg-white">
                    <canvas id="myChart1" width="400" height="300"></canvas>
                    <script>
                        var ctx = document.getElementById('myChart1').getContext('2d');
                        var myChart1 = new Chart(ctx, {
                            type: 'pie',
                            data: {
                                labels: ['COD', 'RAZORPAY'],
                                datasets: [{
                                    label: 'Total Income',
                                    data: [{{cod_sum}},{{razorpay_sum}}],
                                    backgroundColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    borderColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }]
                                }
                            }
                        });
                    </script>
                </div>
            </div>
            <div class="col-md-6">
                <div class="bg-white">
                    <canvas id="myChart" width="400" height="300"></canvas>
                    <script>
                        var ctx = document.getElementById('myChart').getContext('2d');
                        var myChart = new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: [{% for category in allcategory %}'{{category}}',{% endfor %}],
                                datasets: [{
                                    label: 'Products',
                                    data: [{% for category in allcategory %}{{ category.product_set.count }},{% endfor %}],
                                    backgroundColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    borderColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }]
                                }
                            }
                        });
                    </script>
                </div>
            </div>
        </div>
    </div>
    <!--End Graphs-->




    <!--script for chart-->
        <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

     <!--Alertify JavaScript -->
     <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>

     <script>
         alertify.set('notifier','position', 'top-right');
         {% for msg in messages %}
             alertify.success('{{ msg }}');
         {% endfor %}
    </script>
    {% endblock main %}
</div>
<!--end page content holder-->
</body>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>

<script>
    $(document).ready(function() {
        $('#mydata').DataTable( {
            dom: 'Bfrtip',
            buttons: [
                'print'
            ]
        } );
    } );
</script>
<script>
    $(document).ready(function() {
        $('#salesdata').DataTable( {
            dom: 'Bfrtip',
            buttons: [
                'copy', 'csv', 'excel', 'pdf', 'print'
            ]
        } );
    } );

</script>
</html>